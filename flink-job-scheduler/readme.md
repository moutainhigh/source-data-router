# flink 批量任务自动调度
支持定时执行任务，任务前置状态检查，任务执行结果检查
## 任务命令对应关系

|任务描述|任务执行命令|任务运行时间|是否集成到当前工程调度管理|对应flink工程|数据来源|
|---|---|---|---|---|---|
|zaful商品基本信息|/usr/local/services/flink/flink-yarn/flink-1.5.0/bin/flink run -d -m yarn-cluster -yqu root.flink -yn 1 -yjm 1024 -ytm 1024 /usr/local/services/flink/zaful-goods-base-info-es-0.1.jar|||||
|zaful 商品统计信息 1 天|/usr/local/services/flink/flink-yarn/flink-1.5.0/bin/flink run -d -m yarn-cluster -yqu root.flink -yn 1 -yjm 1024 -ytm 1024 -ynm feature_items_v2_2_ods_info /usr/local/services/flink/zaful-goods-statistics-es-0.1.jar --filePath /user/hive/warehouse/dw_zaful_recommend.db/feature_items_v2_2_ods_info/ --good.dimension 1 --index-name dy_zaful_goods_statistics_1 --es.source.fields item_id,pv_cnt,pv_uv,pv_per_cnt,ipv_cnt,ipv_uv,ipv_per_cnt,bag_cnt,bag_uv,bag_per_cnt,favorite_cnt,favorite_uv,favorite_per_cnt,order_item_cnt,order_uv,order_per_cnt,cvr,uv_cvr,order_cnt,order_income,ctr,uv_ctr,platform  --file.date 2019-06-12|5:15am|是|http://gitlab.egomsl.com/BTS/flink-realtime-counter/tree/master/zaful-goods-statistics-es|大数据hdfs|
|zaful 商品统计信息 3 天|/usr/local/services/flink/flink-yarn/flink-1.5.0/bin/flink run -yqu root.ai.offline -d -m yarn-cluster -yn 1 -yjm 1024 -ytm 1024 -ynm feature_items_v2_2_ods_info_three_days /usr/local/services/flink/zaful-goods-statistics-es-0.1.jar --filePath /user/hive/warehouse/dw_zaful_recommend.db/feature_items_v2_2_ods_info_three_days/ --good.dimension 3 --index-name dy_zaful_goods_statistics_greater_than_1 --es.source.fields item_id,pv_cnt,pv_uv,pv_per_cnt,ipv_cnt,ipv_uv,ipv_per_cnt,bag_cnt,bag_uv,bag_per_cnt,favorite_cnt,favorite_uv,favorite_per_cnt,order_item_cnt,order_uv,order_per_cnt,cvr,uv_cvr,order_cnt,order_income,ctr,uv_ctr,platform --job-name zaful-goods-statistics-es_3_  --file.date  2019-06-12|5:15am|是|http://gitlab.egomsl.com/BTS/flink-realtime-counter/tree/master/zaful-goods-statistics-es|大数据hdfs|
|zaful 商品统计信息 7 天|/usr/local/services/flink/flink-yarn/flink-1.5.0/bin/flink run -d -m yarn-cluster -yqu root.flink -yn 1 -yjm 1024 -ytm 1024 -ynm feature_items_v2_2_ods_info_seven_days /usr/local/services/flink/zaful-goods-statistics-es-0.1.jar --filePath /user/hive/warehouse/dw_zaful_recommend.db/feature_items_v2_2_ods_info_seven_days/ --good.dimension 7 --index-name dy_zaful_goods_statistics_greater_than_1 --es.source.fields item_id,pv_cnt,pv_uv,pv_per_cnt,ipv_cnt,ipv_uv,ipv_per_cnt,bag_cnt,bag_uv,bag_per_cnt,favorite_cnt,favorite_uv,favorite_per_cnt,order_item_cnt,order_uv,order_per_cnt,cvr,uv_cvr,order_cnt,order_income,ctr,uv_ctr,platform --job-name zaful-goods-statistics-es_7_ --file.date 2019-06-12|5:15am|是|http://gitlab.egomsl.com/BTS/flink-realtime-counter/tree/master/zaful-goods-statistics-es|大数据hdfs|
|zaful 商品统计信息 15 天|/usr/local/services/flink/flink-yarn/flink-1.5.0/bin/flink run -d -m yarn-cluster -yqu root.flink -yn 1 -yjm 1024 -ytm 1024 -ynm feature_items_v2_2_ods_info_fifteen_days /usr/local/services/flink/zaful-goods-statistics-es-0.1.jar --filePath /user/hive/warehouse/dw_zaful_recommend.db/feature_items_v2_2_ods_info_fifteen_days/ --good.dimension 15 --index-name dy_zaful_goods_statistics_greater_than_1 --es.source.fields item_id,pv_cnt,pv_uv,pv_per_cnt,ipv_cnt,ipv_uv,ipv_per_cnt,bag_cnt,bag_uv,bag_per_cnt,favorite_cnt,favorite_uv,favorite_per_cnt,order_item_cnt,order_uv,order_per_cnt,cvr,uv_cvr,order_cnt,order_income,ctr,uv_ctr,platform --job-name zaful-goods-statistics-es_15_  --file.date 2019-06-12|5:15am|是|http://gitlab.egomsl.com/BTS/flink-realtime-counter/tree/master/zaful-goods-statistics-es|大数据hdfs|
|zaful 商品统计信息 30 天|/usr/local/services/flink/flink-yarn/flink-1.5.0/bin/flink run -d -m yarn-cluster -yqu root.flink -yn 1 -yjm 1024 -ytm 1024 -ynm feature_items_v2_2_ods_info_thirty_days /usr/local/services/flink/zaful-goods-statistics-es-0.1.jar --filePath /user/hive/warehouse/dw_zaful_recommend.db/feature_items_v2_2_ods_info_thirty_days/ --good.dimension 30 --index-name dy_zaful_goods_statistics_greater_than_1 --es.source.fields item_id,pv_cnt,pv_uv,pv_per_cnt,ipv_cnt,ipv_uv,ipv_per_cnt,bag_cnt,bag_uv,bag_per_cnt,favorite_cnt,favorite_uv,favorite_per_cnt,order_item_cnt,order_uv,order_per_cnt,cvr,uv_cvr,order_cnt,order_income,ctr,uv_ctr,platform --job-name zaful-goods-statistics-es_30_ --file.date 2019-06-12|5:15am|是|http://gitlab.egomsl.com/BTS/flink-realtime-counter/tree/master/zaful-goods-statistics-es|大数据hdfs|
|zaful 商品统计信息分国家 1 天|/usr/local/services/flink/flink-yarn/flink-1.5.0/bin/flink run -d -m yarn-cluster -yqu root.flink -yn 1 -yjm 1024 -ytm 1024 -ynm feature_items_country_v2_2_ods_info /usr/local/services/flink/zaful-goods-statistics-es-0.1.jar --filePath /user/hive/warehouse/dw_zaful_recommend.db/feature_items_country_v2_2_ods_info/ --good.dimension 1 --index-name dy_zaful_country_goods_statistics_1 --es.source.fields item_id,country,pv_cnt,pv_uv,pv_per_cnt,ipv_cnt,ipv_uv,ipv_per_cnt,bag_cnt,bag_uv,bag_per_cnt,favorite_cnt,favorite_uv,favorite_per_cnt,order_item_cnt,order_uv,order_per_cnt,cvr,uv_cvr,order_cnt,order_income,ctr,uv_ctr,platform --job-name zaful-goods-country-statistics-es_1_ --file.date 2019-06-12|5:15am|是|http://gitlab.egomsl.com/BTS/flink-realtime-counter/tree/master/zaful-goods-statistics-es|大数据hdfs|
|zaful 商品统计信息分国家 3 天|/usr/local/services/flink/flink-yarn/flink-1.5.0/bin/flink run -d -m yarn-cluster -yn 1 -yjm 1024 -ytm 1024 -ynm feature_items_country_v2_2_ods_info_three_days /usr/local/services/flink/zaful-goods-statistics-es-0.1.jar --filePath /user/hive/warehouse/dw_zaful_recommend.db/feature_items_country_v2_2_ods_info_three_days/ --good.dimension 3 --index-name dy_zaful_country_goods_statistics_greater_than_1 --es.source.fields item_id,country,pv_cnt,pv_uv,pv_per_cnt,ipv_cnt,ipv_uv,ipv_per_cnt,bag_cnt,bag_uv,bag_per_cnt,favorite_cnt,favorite_uv,favorite_per_cnt,order_item_cnt,order_uv,order_per_cnt,cvr,uv_cvr,order_cnt,order_income,ctr,uv_ctr,platform --job-name zaful-goods-country-statistics-es_3_ --file.date 2019-06-12|5:15am|是|http://gitlab.egomsl.com/BTS/flink-realtime-counter/tree/master/zaful-goods-statistics-es|大数据hdfs|
|zaful 商品统计信息分国家 7 天|/usr/local/services/flink/flink-yarn/flink-1.5.0/bin/flink run -d -m yarn-cluster -yn 1 -yjm 1024 -ytm 1024 -ynm feature_items_country_v2_2_ods_info_seven_days /usr/local/services/flink/zaful-goods-statistics-es-0.1.jar --filePath /user/hive/warehouse/dw_zaful_recommend.db/feature_items_country_v2_2_ods_info_seven_days/ --good.dimension 7 --index-name dy_zaful_country_goods_statistics_greater_than_1 --es.source.fields item_id,country,pv_cnt,pv_uv,pv_per_cnt,ipv_cnt,ipv_uv,ipv_per_cnt,bag_cnt,bag_uv,bag_per_cnt,favorite_cnt,favorite_uv,favorite_per_cnt,order_item_cnt,order_uv,order_per_cnt,cvr,uv_cvr,order_cnt,order_income,ctr,uv_ctr,platform --job-name zaful-goods-country-statistics-es_7_ --file.date 2019-06-12|5:15am|是|http://gitlab.egomsl.com/BTS/flink-realtime-counter/tree/master/zaful-goods-statistics-es|大数据hdfs|
|zaful 商品统计信息分国家 15 天|/usr/local/services/flink/flink-yarn/flink-1.5.0/bin/flink run -d -m yarn-cluster -yn 1 -yjm 1024 -ytm 1024 -ynm feature_items_country_v2_2_ods_info_fifteen_days /usr/local/services/flink/zaful-goods-statistics-es-0.1.jar --filePath /user/hive/warehouse/dw_zaful_recommend.db/feature_items_country_v2_2_ods_info_fifteen_days/ --good.dimension 15 --index-name dy_zaful_country_goods_statistics_greater_than_1 --es.source.fields item_id,country,pv_cnt,pv_uv,pv_per_cnt,ipv_cnt,ipv_uv,ipv_per_cnt,bag_cnt,bag_uv,bag_per_cnt,favorite_cnt,favorite_uv,favorite_per_cnt,order_item_cnt,order_uv,order_per_cnt,cvr,uv_cvr,order_cnt,order_income,ctr,uv_ctr,platform --job-name zaful-goods-country-statistics-es_15_ --file.date 2019-06-12|5:15am|是|http://gitlab.egomsl.com/BTS/flink-realtime-counter/tree/master/zaful-goods-statistics-es|大数据hdfs|
|zaful 商品统计信息分国家 30 天|/usr/local/services/flink/flink-yarn/flink-1.5.0/bin/flink run -d -m yarn-cluster -yqu root.flink -yn 1 -yjm 1024 -ytm 1024 -ynm feature_items_country_v2_2_ods_info_thirty_days /usr/local/services/flink/zaful-goods-statistics-es-0.1.jar --filePath /user/hive/warehouse/dw_zaful_recommend.db/feature_items_country_v2_2_ods_info_thirty_days/ --good.dimension 30 --index-name dy_zaful_country_goods_statistics_greater_than_1 --es.source.fields item_id,country,pv_cnt,pv_uv,pv_per_cnt,ipv_cnt,ipv_uv,ipv_per_cnt,bag_cnt,bag_uv,bag_per_cnt,favorite_cnt,favorite_uv,favorite_per_cnt,order_item_cnt,order_uv,order_per_cnt,cvr,uv_cvr,order_cnt,order_income,ctr,uv_ctr,platform --job-name zaful-goods-country-statistics-es_30_ --file.date 2019-06-12|5:15am|是|http://gitlab.egomsl.com/BTS/flink-realtime-counter/tree/master/zaful-goods-statistics-es|大数据hdfs|
|zaful 商品销售趋势 5 个特征|/usr/local/services/flink/flink-yarn/flink-1.5.0/bin/flink run -d -m yarn-cluster -yn 1 -yjm 1024 -ytm 1024 -ynm feature_items_v2_2_ods_info_new_label /usr/local/services/flink/zaful-goods-statistics-es-0.1.jar --filePath /user/hive/warehouse/dw_zaful_recommend.db/feature_items_v2_2_ods_info_new_label/ --good.dimension -1 --index-name dy_zaful_goods_statistics_tendency --es.source.fields item_id,ctr_rising_tendency,cvr_rising_tendency,ctr_stability_index,cvr_stability_index,heat_index,platform --job-name zaful-goods-statistics-es_tendency --file.date 2019-06-12|5:15am|是|http://gitlab.egomsl.com/BTS/flink-realtime-counter/tree/master/zaful-goods-statistics-es|大数据hdfs|
|zaful 商品销售趋势 5 个特征分国家| /usr/local/services/flink/flink-yarn/flink-1.5.0/bin/flink run -d -m yarn-cluster -yn 1 -yjm 1024 -ytm 1024 -ynm feature_items_v2_2_ods_info_new_label_country /usr/local/services/flink/zaful-goods-statistics-es-0.1.jar --filePath /user/hive/warehouse/dw_zaful_recommend.db/feature_items_v2_2_ods_info_new_label_country/ --good.dimension -1 --index-name dy_zaful_goods_statistics_tendency_country --es.source.fields item_id,ctr_rising_tendency,cvr_rising_tendency,ctr_stability_index,cvr_stability_index,heat_index,country,platform --job-name zaful-goods-statistics-tendency_country --file.date 2019-06-12|5:15am|是|http://gitlab.egomsl.com/BTS/flink-realtime-counter/tree/master/zaful-goods-statistics-es|大数据hdfs|
|zaful app 用户基本信息Facebook 广告特征|/usr/local/services/flink/flink-yarn/flink-1.5.0/bin/flink run -d -m yarn-cluster -yn 1 -yjm 1024 -ytm 1024 -s 1 -nm app-user-feature-es /usr/local/services/flink/app-user-feature-es-0.1.jar --job.hdfs.path /user/hive/warehouse/dw_zaful_recommend.db/zaful_app_abset_id_user_fb_cookieid_fb/add_time=20190612/ --index-name dy_app_zaful_user_feature|0:30am|是|http://gitlab.egomsl.com/BTS/flink-realtime-counter/tree/master/app-user-feature-es|大数据hdfs|
|zaful app 用户广告特征|/usr/local/services/flink/flink-yarn/flink-1.5.0/bin/flink run -d -m yarn-cluster -yn 1 -yjm 1024 -ytm 1024 /usr/local/services/flink/fb-ad-user-feature-es-0.1.jar --job.hdfs.path /user/hive/warehouse/dw_zaful_recommend.db/zaful_app_abset_id_user_fb_all_every_hour/add_time=2019032103|每小时全量|是|http://gitlab.egomsl.com/BTS/flink-realtime-counter/tree/master/fb-ad-user-feature-es|大数据hdfs|
|GB sku 与搜索词关联关系|/usr/local/services/flink/flink-yarn/flink-1.5.0/bin/flink run -d -m yarn-cluster -yn 1 -yjm 1024 -ytm 1024 -yqu root.flink -ynm search-words-skus-rel /usr/local/services/flink/search-words-skus-rel-0.1.jar --elastic-servers 172.31.47.84:9302,172.31.43.158:9302,172.31.55.231:9302 --index-name dy_gb_search_words_skus_rel --type-name log --cluster.name esearch-aws-dy --job.path.auto.end false --job.search.words.path /user/hive/warehouse/dw_proj.db/zaful_app_search_word_fourteen_days_report/add_time=2019-06-12|5:15 am|是|http://gitlab.egomsl.com/BTS/flink-realtime-counter/tree/master/search-words-skus-rel|大数据hdfs|

## 部署信息
172.31.62.7 <br>
部署目录：/usr/local/services/flink/flink-job-scheduler-1.0-SNAPSHOT